<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>äººç”Ÿè²¡å‹™é¢¨éšªå°èˆª</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #0056b3;
            --accent-gold: #b7892b;
            --danger-red: #dc3545;
            --bg-light: #f4f7f9;
            --card-white: #ffffff;
            --text-dark: #2c3e50;
            --text-grey: #6c757d;
        }

        body { 
            font-family: 'Noto Sans TC', sans-serif;
            background: var(--bg-light);
            margin: 0; padding: 20px; color: var(--text-dark);
            line-height: 1.5;
        }

        .container { max-width: 650px; margin: auto; }

        .header { text-align: center; margin-bottom: 25px; }
        .header h1 { 
            color: var(--primary-blue); margin-bottom: 5px; font-size: 1.6rem; font-weight: 700;
        }
        .header p.sub-title { color: var(--text-grey); margin-top: 0; font-size: 0.95rem; }
        .author { margin-top: 8px; font-size: 0.85rem; color: var(--primary-blue); font-weight: 500; }

        .light-card { 
            background: var(--card-white);
            border-radius: 12px; 
            padding: 20px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.04);
            margin-bottom: 15px;
            border: 1px solid #e9ecef;
        }

        .section-title { 
            font-size: 1.1rem; font-weight: 700; color: var(--primary-blue);
            margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;
            display: flex; align-items: center;
        }
        .section-icon { margin-right: 8px; font-size: 1.2rem; }

        .input-group { margin-bottom: 12px; }
        label { display: block; font-size: 0.9rem; color: var(--text-dark); margin-bottom: 4px; font-weight: 500; }
        
        input { 
            width: 100%; height: 44px; 
            background: #f8f9fa;
            border: 2px solid #dee2e6; border-radius: 8px; 
            font-size: 1rem; padding: 0 12px; box-sizing: border-box; color: var(--text-dark);
            transition: 0.2s;
        }
        input:focus { outline: none; border-color: var(--primary-blue); background: #fff; }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        
        .exp-label { color: #555; font-size: 0.85rem; }

        button { 
            width: 100%; height: 60px; 
            background: var(--primary-blue);
            color: #fff; border: none; border-radius: 8px; 
            font-size: 1.2rem; font-weight: 700;
            cursor: pointer; margin-top: 15px; 
            box-shadow: 0 4px 6px rgba(0, 86, 179, 0.2);
            transition: 0.2s;
        }
        button:active { transform: translateY(1px); box-shadow: none; background: #004494; }

        .result-box { 
            background: #fff;
            border-radius: 12px; padding: 25px; display: none; margin-top: 25px;
            border-top: 5px solid var(--primary-blue);
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        }
        .res-item { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        .res-label { font-size: 0.95rem; color: var(--text-grey); margin-bottom: 4px; }
        .res-value { font-size: 1.6rem; font-weight: 700; color: var(--text-dark); line-height: 1.2; }
        
        .danger-val { color: var(--danger-red); }
        .gold-val { color: var(--accent-gold); }
        .blue-val { color: var(--primary-blue); }
        .sub-text { font-size: 0.8rem; color: var(--text-grey); display: block; margin-top: 2px; }

        /* æœ€å¾Œçš„çµè«–å¡ç‰‡ */
        .final-verdict {
            background: #fff5f5;
            border: 2px solid #feb2b2;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }
        .final-verdict h3 { color: #c53030; margin: 0 0 10px 0; font-size: 1.1rem; }
        .final-number { font-size: 2rem; font-weight: 800; color: #c53030; display: block; margin: 5px 0; }
        
        footer { text-align: center; margin-top: 30px; padding-bottom: 20px; color: var(--text-grey); font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>äººç”Ÿè²¡å‹™é¢¨éšªå°èˆª</h1>
        <p class="sub-title">å¾ç¾åœ¨é–‹å§‹ï¼Œè¨ˆç®—é€šå¾€æœªä¾†çš„ä»£åƒ¹</p>
        <div class="author">å°ˆæ¥­é¡§å•ï¼šæå˜‰å“² Gavin</div>
    </div>

    <div class="light-card">
        <div class="section-title"><span class="section-icon">ğŸ“‹</span> ç›®å‰ç‹€æ…‹ (24-65æ­² è²¬ä»»æœŸ)</div>
        <div class="grid">
            <div class="input-group">
                <label>ç›®å‰å¹´é½¡</label>
                <input type="number" id="currentAge" value="35">
            </div>
            <div class="input-group">
                <label>ç›®å‰å­˜æ¬¾ (è¬å…ƒ)</label>
                <input type="number" id="savings" value="100">
            </div>
        </div>
        <div class="input-group">
            <label>æ¯æœˆæ”¶å…¥ (å…ƒ)</label>
            <input type="number" id="monthlyIncome" value="60000">
        </div>
    </div>

    <div class="light-card">
        <div class="section-title"><span class="section-icon">ğŸ’¸</span> å¹´åº¦å¿…è¦æ”¯å‡ºç´°é … (è² é‡åˆ†æ)</div>
        
        <div class="grid">
            <div class="input-group">
                <label class="exp-label">æˆ¿è²¸/æˆ¿ç§Ÿ (æœˆ)</label>
                <input type="number" id="houseExp" value="20000">
            </div>
            <div class="input-group">
                <label class="exp-label">è»Šè²¸/é¤Šè»Š (æœˆ)</label>
                <input type="number" id="carExp" value="8000">
            </div>
            <div class="input-group">
                <label class="exp-label">å­è¦ªè²» (æœˆ)</label>
                <input type="number" id="parentExp" value="5000">
            </div>
            <div class="input-group">
                <label class="exp-label">è‚²å…’/æ•™è‚²è²» (æœˆ)</label>
                <input type="number" id="childExp" value="10000">
            </div>
            <div class="input-group">
                <label class="exp-label">é£²é£Ÿ/ç”Ÿæ´»é›œæ”¯ (æœˆ)</label>
                <input type="number" id="dailyExp" value="15000">
            </div>
            <div class="input-group">
                <label class="exp-label" style="color:var(--primary-blue); font-weight:bold;">ä¼´ä¾¶ç¶“ç‡Ÿèˆ‡ç´€å¿µæ—¥ (æœˆ)</label>
                <input type="number" id="partnerExp" value="5000">
            </div>
        </div>

        <hr style="border:0; border-top:1px dashed #ddd; margin: 10px 0;">

        <div class="grid">
            <div class="input-group">
                <label class="exp-label">å¹´åº¦ä¿éšª/é†«ç™‚ (å¹´)</label>
                <input type="number" id="insuranceExp" value="40000">
            </div>
            <div class="input-group">
                <label class="exp-label">è‡ªæˆ‘é€²ä¿®/ç¤¾äº¤ (å¹´)</label>
                <input type="number" id="learnExp" value="20000">
            </div>
            <div class="input-group" style="grid-column: span 2;">
                <label class="exp-label">å¹´åº¦æ—…éŠ/å¨›æ¨‚é ç®— (å¹´)</label>
                <input type="number" id="travelExp" value="60000">
            </div>
        </div>
    </div>

    <div class="light-card">
        <div class="section-title"><span class="section-icon">ğŸ¯</span> 65æ­²å¾Œçš„ç›®æ¨™</div>
        <div class="grid">
            <div class="input-group">
                <label>é€€ä¼‘æœˆç”Ÿæ´»è²» (ç¾å€¼)</label>
                <input type="number" id="retireMonthlyTarget" value="50000">
            </div>
            <div class="input-group">
                <label>é ä¼°é€šè†¨ç‡ (%)</label>
                <input type="number" id="inflationRate" value="3">
            </div>
        </div>
    </div>

    <button onclick="calculate()">åˆ†ææˆ‘çš„è²¡å‹™ç¼ºå£</button>

    <div id="results" class="result-box">
        <div class="header">
            <h2 style="color:var(--primary-blue); margin:0;">è²¡å‹™é¢¨éšªåˆ†æå ±å‘Š</h2>
        </div>
        
        <div class="res-item">
            <div class="res-label">è·é›¢ 65 æ­²é€€ä¼‘å‰©é¤˜ï¼š</div>
            <div class="res-value blue-val"><span id="yearsRemain"></span> å¹´</div>
        </div>
        
        <div class="res-item">
            <div class="res-label">é€šè†¨è³¼è²·åŠ›é¢¨éšª (é€€ä¼‘æ™‚)ï¼š</div>
            <div class="res-value gold-val">å‰© <span id="purchasingPower"></span> å…ƒ</div>
            <span class="sub-text">ğŸ’¡ è‹¥æ”¶å…¥ä¸æˆé•·ï¼Œæœªä¾†ç”Ÿæ´»å“è³ªå°‡åš´é‡ç¸®æ°´ã€‚</span>
        </div>
        
        <div class="res-item">
            <div class="res-label">è²¬ä»»æœŸ (ç¾åœ¨-65æ­²) ç¸½æ”¯å‡ºç¼ºå£</div>
            <div class="res-value danger-val">$ <span id="totalGap"></span> å…ƒ</div>
            <span class="sub-text">âš ï¸ åŒ…å«æˆ¿è»Šè²¸ã€è‚²å…’åŠç”Ÿæ´»è²»ï¼Œæ‰£é™¤å­˜æ¬¾å¾Œçš„æ•¸å­—ã€‚</span>
        </div>
        
        <div class="res-item">
            <div class="res-label">é€€ä¼‘æœŸ (65-85æ­²) é¤Šè€æº–å‚™é‡‘</div>
            <div class="res-value blue-val">$ <span id="retireNeed"></span> å…ƒ</div>
            <span class="sub-text">ğŸ¯ æƒ³è¦æœ‰å°Šåš´çš„é€€ä¼‘ç”Ÿæ´»ï¼Œé€™ç­†éŒ¢æ˜¯å¿…é ˆçš„ã€‚</span>
        </div>

        <div class="final-verdict">
            <h3>ğŸ”´ ç¾å¯¦çš„æ®˜é…·çµè«–</h3>
            <p style="margin:5px 0; color:#555; font-size:0.9rem;">ç‚ºäº†å¡«è£œè²¬ä»»æœŸèˆ‡é€€ä¼‘é‡‘çš„æ‰€æœ‰ç¼ºå£<br>å¾<b>ä»Šå¤©</b>é–‹å§‹ï¼Œæ‚¨æ¯å€‹æœˆå¿…é ˆå­˜ä¸‹ï¼š</p>
            <span class="final-number">$ <span id="monthlySaveNeeded"></span> å…ƒ</span>
            <p style="margin-top:10px; font-size:0.85rem; color:#c53030; font-weight:bold;" id="warningText"></p>
        </div>
    </div>

    <footer>
        &copy; 2026 å°ˆæ¥­è²¡å‹™è¦åŠƒç³»çµ± | è£½ä½œè€…ï¼šæå˜‰å“² Gavin
    </footer>
</div>

<script>
function calculate() {
    // 1. ç²å–æ•¸å€¼
    const currentAge = parseInt(document.getElementById('currentAge').value);
    const savings = parseFloat(document.getElementById('savings').value) * 10000;
    const monthlyIncome = parseFloat(document.getElementById('monthlyIncome').value);
    const inflation = parseFloat(document.getElementById('inflationRate').value) / 100;
    
    const yearsToRetire = 65 - currentAge;
    if (yearsToRetire <= 0) {
        alert("å¹´é½¡å·²è¶…éé€€ä¼‘å¹´é½¡ï¼Œè«‹é‡æ–°è¼¸å…¥");
        return;
    }

    // 2. è³¼è²·åŠ›ç¸®æ°´
    const pPower = monthlyIncome / Math.pow((1 + inflation), yearsToRetire);

    // 3. è²¬ä»»æœŸç¸½æ”¯å‡º
    const mHouse = parseFloat(document.getElementById('houseExp').value) || 0;
    const mCar = parseFloat(document.getElementById('carExp').value) || 0;
    const mParent = parseFloat(document.getElementById('parentExp').value) || 0;
    const mChild = parseFloat(document.getElementById('childExp').value) || 0;
    const mDaily = parseFloat(document.getElementById('dailyExp').value) || 0;
    const mPartner = parseFloat(document.getElementById('partnerExp').value) || 0;
    
    const yInsurance = parseFloat(document.getElementById('insuranceExp').value) || 0;
    const yLearn = parseFloat(document.getElementById('learnExp').value) || 0;
    const yTravel = parseFloat(document.getElementById('travelExp').value) || 0;

    const annualTotalExp = (mHouse + mCar + mParent + mChild + mDaily + mPartner) * 12 + (yInsurance + yLearn + yTravel);
    const totalExpInResponsibility = annualTotalExp * yearsToRetire;
    const finalGap = totalExpInResponsibility - savings; // é€™æ˜¯è²¬ä»»æœŸçš„ç¼ºå£

    // 4. é€€ä¼‘é‡‘éœ€æ±‚
    const retireMonthly = parseFloat(document.getElementById('retireMonthlyTarget').value);
    const retireTotal = retireMonthly * 12 * 20;

    // 5. è¨ˆç®—æ¯æœˆéœ€å­˜é‡‘é¡ (Total Gap + Retire Gap) / å‰©é¤˜æœˆä»½
    // æ³¨æ„ï¼šå¦‚æœfinalGapæ˜¯è² çš„(ä»£è¡¨å­˜æ¬¾å¤ ä»˜è²¬ä»»æœŸ)ï¼Œå‰‡åªéœ€è¦ç®—é€€ä¼‘é‡‘ï¼Œæ‰£æ‰å‰©é¤˜å­˜æ¬¾
    let grandTotalNeeded = 0;
    if (finalGap > 0) {
        grandTotalNeeded = finalGap + retireTotal;
    } else {
        grandTotalNeeded = retireTotal + finalGap; // finalGapæ˜¯è² æ•¸ï¼Œç­‰æ–¼è®Šç›¸æ‰£é™¤
    }

    const monthsToRetire = yearsToRetire * 12;
    const monthlySave = grandTotalNeeded > 0 ? (grandTotalNeeded / monthsToRetire) : 0;

    // 6. é¡¯ç¤ºçµæœ
    document.getElementById('yearsRemain').innerText = yearsToRetire;
    document.getElementById('purchasingPower').innerText = Math.round(pPower).toLocaleString();
    
    // å¦‚æœç¼ºå£æ˜¯è² æ•¸ï¼Œé¡¯ç¤º0
    document.getElementById('totalGap').innerText = Math.round(Math.max(0, finalGap)).toLocaleString();
    document.getElementById('retireNeed').innerText = Math.round(retireTotal).toLocaleString();
    
    const saveElement = document.getElementById('monthlySaveNeeded');
    saveElement.innerText = Math.round(monthlySave).toLocaleString();

    // è­¦å‘Šæ–‡å­—é‚è¼¯
    const warningText = document.getElementById('warningText');
    if (monthlySave > monthlyIncome) {
        warningText.innerText = "âš ï¸ è­¦å‘Šï¼šé€™å·²è¶…éæ‚¨ç›®å‰çš„æœˆæ”¶å…¥ï¼";
    } else if (monthlySave > monthlyIncome * 0.5) {
        warningText.innerText = "âš ï¸ è­¦å‘Šï¼šé€™éœ€è¦æ‚¨å­˜ä¸‹è¶…éä¸€åŠçš„æ”¶å…¥ï¼";
    } else {
        warningText.innerText = "ğŸ’¡ é€™æ˜¯è¦åœ¨ 65 æ­²å‰è²¡å¯Œè‡ªç”±çš„æœ€ä½æ¨™æº–ã€‚";
    }
    
    const resultBox = document.getElementById('results');
    resultBox.style.display = 'block';
    resultBox.scrollIntoView({ behavior: 'smooth', block: 'start' });
}
</script>

</body>
</html>
