<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人生風險財務規劃顧問工具</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: sans-serif; background: #f4f7f6; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { color: #2c3e50; border-bottom: 2px solid #e74c3c; padding-bottom: 10px; }
        .input-group { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .result-card { background: #fff5f5; border-left: 5px solid #e74c3c; padding: 15px; margin-top: 20px; }
        .highlight { color: #e74c3c; font-size: 1.2em; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>人生風險財務評估 (顧問專用)</h2>
    
    <div class="input-group">
        <div>
            <label>客戶目前年齡</label>
            <input type="number" id="currentAge" value="30">
        </div>
        <div>
            <label>目前月收入 (元)</label>
            <input type="number" id="monthlyIncome" value="50000">
        </div>
    </div>

    <h3>預估總支出 (至65歲)</h3>
    <div class="input-group">
        <div><label>每月生活費</label><input type="number" id="livingExp" value="20000"></div>
        <div><label>每月房貸/房租</label><input type="number" id="rentExp" value="15000"></div>
        <div><label>每月孝親費</label><input type="number" id="parentExp" value="5000"></div>
        <div><label>每月車輛/交通</label><input type="number" id="carExp" value="8000"></div>
        <div><label>每年旅遊預算</label><input type="number" id="travelExp" value="100000"></div>
        <div><label>通膨率預估 (%)</label><input type="number" id="inflationRate" value="2.5"></div>
    </div>

    <button onclick="calculate()" style="width:100%; padding:15px; background:#2c3e50; color:white; border:none; border-radius:6px; cursor:pointer;">開始分析風險</button>

    <div id="results" class="result-card" style="display:none;">
        <p>距離 65 歲退休還有：<span id="yearsToRetire" class="highlight"></span> 年</p>
        <p>退休時，您的 <span id="currentIncomeLabel"></span> 元收入，購買力僅相當於現在的：<span id="futureValue" class="highlight"></span> 元</p>
        <hr>
        <p>到退休前的總支出累計：<span id="totalExp" class="highlight"></span> 元</p>
        <p>這還不包含「退休後」至少 20 年的醫療與生活費！</p>
    </div>
    
    <canvas id="myChart" width="400" height="200"></canvas>
</div>

<script>
function calculate() {
    const age = document.getElementById('currentAge').value;
    const income = document.getElementById('monthlyIncome').value;
    const inflation = document.getElementById('inflationRate').value / 100;
    const years = 65 - age;
    
    // 計算通膨後的購買力 (FV = PV / (1+r)^n)
    const pv = income / Math.pow((1 + inflation), years);
    
    // 計算總支出
    const mExp = parseFloat(document.getElementById('livingExp').value) + 
                 parseFloat(document.getElementById('rentExp').value) + 
                 parseFloat(document.getElementById('parentExp').value) + 
                 parseFloat(document.getElementById('carExp').value);
    const yearlyTravel = parseFloat(document.getElementById('travelExp').value);
    
    const totalExpenditure = (mExp * 12 * years) + (yearlyTravel * years);

    document.getElementById('yearsToRetire').innerText = years;
    document.getElementById('currentIncomeLabel').innerText = income;
    document.getElementById('futureValue').innerText = Math.round(pv).toLocaleString();
    document.getElementById('totalExp').innerText = Math.round(totalExpenditure).toLocaleString();
    document.getElementById('results').style.display = 'block';
}
</script>
</body>
</html>
