<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>äººç”Ÿè²¡å‹™å°èˆªç³»çµ± ğŸš€</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #f8f9fa; font-family: "Microsoft JhengHei", sans-serif; padding-bottom: 100px; }
        .card { border: none; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .card-header { font-weight: bold; color: white; border-radius: 15px 15px 0 0 !important; }
        
        /* æ¼¸å±¤è‰²ç³» */
        .bg-gradient-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .bg-gradient-success { background: linear-gradient(135deg, #2af598 0%, #009efd 100%); }
        .bg-gradient-danger { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%); color: #555; }
        .bg-amway { background: linear-gradient(135deg, #3b41c5 0%, #a981bb 49%, #ffc8a9 100%); }

        .stat-box { background: white; padding: 15px; border-radius: 10px; text-align: center; height: 100%; }
        .stat-value { font-size: 1.3rem; font-weight: 800; color: #333; }
        .stat-label { font-size: 0.8rem; color: #777; }
        
        .dynamic-row { background-color: #f8f9fa; border-radius: 8px; padding: 10px; margin-bottom: 10px; position: relative; border-left: 4px solid #ddd; }
        .btn-remove { position: absolute; top: 5px; right: 5px; color: #dc3545; background: none; border: none; font-size: 1.2rem; }
        
        .history-table th { font-size: 0.85rem; }
        .history-table td { font-size: 0.85rem; vertical-align: middle; }
    </style>
</head>
<body>

<nav class="navbar navbar-dark bg-dark mb-3 sticky-top">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1"><i class="fas fa-chart-line me-2"></i>è²¡å‹™è‡ªç”±å°èˆª</span>
        <button class="btn btn-sm btn-outline-warning" onclick="saveCurrentMonthRecord()">
            <i class="fas fa-save me-1"></i>ç´€éŒ„æœ¬æœˆ
        </button>
    </div>
</nav>

<div class="container">

    <div class="card bg-amway text-white">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-bullseye me-2"></i>é€€ä¼‘èˆ‡å¤¢æƒ³é€²åº¦</h5>
            
            <div class="row g-2 mt-3">
                <div class="col-6">
                    <div class="stat-box">
                        <div class="stat-label">é›¢é€€ä¼‘ç›®æ¨™é‚„å·®</div>
                        <div id="retirement-gap" class="stat-value text-danger">è¨ˆç®—ä¸­...</div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="stat-box">
                        <div class="stat-label">å¤¢æƒ³åŸºé‡‘é”æˆç‡</div>
                        <div id="dream-progress" class="stat-value text-primary">0%</div>
                    </div>
                </div>
            </div>

            <div class="mt-3">
                <label class="small text-white-50">é€€ä¼‘è¢«å‹•æ”¶å…¥è¦†è“‹ç‡</label>
                <div class="progress" style="height: 10px;">
                    <div id="retirement-bar" class="progress-bar bg-success" role="progressbar" style="width: 0%"></div>
                </div>
            </div>
            
            <div id="retirement-status" class="alert alert-light mt-3 mb-0 py-2 small fw-bold text-center text-dark">
                </div>
        </div>
    </div>

    <div class="accordion mb-3" id="profileAccordion">
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#collapseProfile">
                    âš™ï¸ è¨­å®šï¼šå¹´é½¡ã€å¤¢æƒ³èˆ‡é€€ä¼‘æ¨™æº–
                </button>
            </h2>
            <div id="collapseProfile" class="accordion-collapse collapse" data-bs-parent="#profileAccordion">
                <div class="accordion-body bg-light">
                    <div class="row g-2">
                        <div class="col-6">
                            <label class="form-label small">ç›®å‰å¹´é½¡</label>
                            <input type="number" id="current-age" class="form-control save-input" placeholder="ä¾‹å¦‚: 30">
                        </div>
                        <div class="col-6">
                            <label class="form-label small">é è¨ˆé€€ä¼‘å¹´é½¡</label>
                            <input type="number" id="retire-age" class="form-control save-input" placeholder="ä¾‹å¦‚: 60">
                        </div>
                        <div class="col-12">
                            <label class="form-label small text-primary fw-bold">é€€ä¼‘å¾Œã€Œæ¯æœˆã€æƒ³èŠ±çš„é‡‘é¡</label>
                            <input type="number" id="target-monthly-expense" class="form-control save-input" placeholder="ä¾‹å¦‚: 100000">
                        </div>
                        <div class="col-12">
                            <label class="form-label small text-warning fw-bold text-dark">å¤¢æƒ³ç›®æ¨™ç¸½é‡‘é¡ (å¦‚è²·æˆ¿/ç’°éŠä¸–ç•Œ)</label>
                            <input type="number" id="dream-amount" class="form-control save-input" placeholder="ä¾‹å¦‚: 10000000">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="accordion" id="financeAccordion">
        
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button fw-bold text-success" type="button" data-bs-toggle="collapse" data-bs-target="#collapseIncome">
                    ğŸ’° æœˆæ”¶å…¥ (ä¸»å‹• + è¢«å‹•)
                </button>
            </h2>
            <div id="collapseIncome" class="accordion-collapse collapse show" data-bs-parent="#financeAccordion">
                <div class="accordion-body">
                    <div class="input-group mb-2">
                        <span class="input-group-text">å·¥è³‡æ”¶å…¥</span>
                        <input type="number" class="form-control save-input calc-trigger" id="income-active" placeholder="0">
                    </div>
                    <div class="p-2 border rounded bg-success bg-opacity-10">
                        <label class="small fw-bold text-success mb-2">ğŸš€ è¢«å‹•æ”¶å…¥ (é—œéµæŒ‡æ¨™)</label>
                        <div class="input-group mb-2">
                            <span class="input-group-text">å®‰éº—æœˆæ”¶å…¥</span>
                            <input type="number" class="form-control save-input calc-trigger passive-source" id="income-amway" placeholder="0">
                        </div>
                        <div class="input-group mb-2">
                            <span class="input-group-text">è‚¡æ¯/é…æ¯</span>
                            <input type="number" class="form-control save-input calc-trigger passive-source" id="income-stock" placeholder="0">
                        </div>
                        <div class="input-group">
                            <span class="input-group-text">æˆ¿ç§Ÿ/å…¶ä»–</span>
                            <input type="number" class="form-control save-input calc-trigger passive-source" id="income-other" placeholder="0">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed fw-bold text-danger" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDebt">
                    ğŸ’¸ è²¸æ¬¾èˆ‡ä¿éšª (å¯è‡ªè¡Œæ–°å¢)
                </button>
            </h2>
            <div id="collapseDebt" class="accordion-collapse collapse" data-bs-parent="#financeAccordion">
                <div class="accordion-body">
                    
                    <h6 class="fw-bold mt-2"><i class="fas fa-car-side me-1"></i>æˆ¿è²¸/è»Šè²¸/ä¿¡è²¸</h6>
                    <div id="loan-container">
                        </div>
                    <button class="btn btn-sm btn-outline-danger w-100 mb-4" onclick="addLoanRow()">
                        <i class="fas fa-plus"></i> æ–°å¢ä¸€ç­†è²¸æ¬¾
                    </button>

                    <h6 class="fw-bold"><i class="fas fa-file-medical me-1"></i>ä¿éšªè²»ç”¨</h6>
                    <div id="insurance-container">
                        </div>
                    <button class="btn btn-sm btn-outline-secondary w-100 mb-3" onclick="addInsRow()">
                        <i class="fas fa-plus"></i> æ–°å¢ä¸€ç­†ä¿éšª
                    </button>

                    <hr>
                    <div class="input-group">
                        <span class="input-group-text">å…¶ä»–ç”Ÿæ´»æœˆæ”¯å‡º</span>
                        <input type="number" class="form-control save-input calc-trigger" id="expense-living" placeholder="ä¼™é£Ÿ/æ°´é›»ç­‰">
                    </div>

                </div>
            </div>
        </div>

        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed fw-bold text-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAsset">
                    ğŸ’ ç¸½è³‡ç”¢ (ç¾æœ‰åƒ¹å€¼)
                </button>
            </h2>
            <div id="collapseAsset" class="accordion-collapse collapse" data-bs-parent="#financeAccordion">
                <div class="accordion-body">
                    <div class="input-group mb-2">
                        <span class="input-group-text">ç¾é‡‘/å­˜æ¬¾</span>
                        <input type="number" class="form-control save-input calc-trigger asset-item" id="asset-cash" placeholder="0">
                    </div>
                    <div class="input-group mb-2">
                        <span class="input-group-text">è‚¡ç¥¨/åŸºé‡‘å¸‚å€¼</span>
                        <input type="number" class="form-control save-input calc-trigger asset-item" id="asset-stock-val" placeholder="0">
                    </div>
                    <div class="input-group">
                        <span class="input-group-text">æˆ¿ç”¢å¸‚å€¼</span>
                        <input type="number" class="form-control save-input calc-trigger asset-item" id="asset-house-val" placeholder="0">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
            <span>ğŸ“… è²¡å‹™æ­·å²ç´€éŒ„ (åƒ…æœ¬æ©Ÿ)</span>
            <button class="btn btn-xs btn-outline-light" onclick="clearHistory()">æ¸…ç©º</button>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-striped history-table mb-0 text-center">
                    <thead class="table-light">
                        <tr>
                            <th>æ—¥æœŸ</th>
                            <th>æ·¨è¢«å‹•æ”¶å…¥</th>
                            <th>ç¸½è³‡ç”¢</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="history-list">
                        </tbody>
                </table>
            </div>
            <div id="no-history" class="text-center p-3 text-muted small">å°šæœªå„²å­˜ä»»ä½•æœˆä»½ç´€éŒ„</div>
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // --- è³‡æ–™çµæ§‹èˆ‡åˆå§‹åŒ– ---
    let loans = []; // [{id, name, monthly, years}]
    let insurances = []; // [{id, name, monthly, years}]
    
    document.addEventListener('DOMContentLoaded', () => {
        loadData();
        calculateAll();
    });

    // ç¶å®šåŸºæœ¬è¼¸å…¥æ¡†
    document.querySelectorAll('.save-input').forEach(input => {
        input.addEventListener('input', () => {
            saveDataLocal(); // è‡ªå‹•æš«å­˜ç•¶ä¸‹è¼¸å…¥
            calculateAll();
        });
    });

    // --- å‹•æ…‹æ–°å¢åŠŸèƒ½ (è²¸æ¬¾) ---
    function addLoanRow(data = null) {
        const id = Date.now();
        const container = document.getElementById('loan-container');
        const div = document.createElement('div');
        div.className = 'dynamic-row';
        div.id = `loan-${id}`;
        div.innerHTML = `
            <button class="btn-remove" onclick="removeRow('loan-${id}', 'loan')">&times;</button>
            <div class="row g-2">
                <div class="col-12">
                    <input type="text" class="form-control form-control-sm loan-name" placeholder="è²¸æ¬¾é …ç›® (å¦‚: æˆ¿è²¸)" value="${data ? data.name : ''}" oninput="saveDataLocal()">
                </div>
                <div class="col-6">
                    <div class="input-group input-group-sm">
                        <span class="input-group-text">$</span>
                        <input type="number" class="form-control loan-amount" placeholder="æœˆä»˜é‡‘" value="${data ? data.amount : ''}" oninput="calculateAll();saveDataLocal()">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group input-group-sm">
                        <input type="number" class="form-control loan-years" placeholder="å‰©é¤˜å¹´" value="${data ? data.years : ''}" oninput="saveDataLocal()">
                        <span class="input-group-text">å¹´</span>
                    </div>
                </div>
            </div>
        `;
        container.appendChild(div);
        if(!data) saveDataLocal();
    }

    // --- å‹•æ…‹æ–°å¢åŠŸèƒ½ (ä¿éšª) ---
    function addInsRow(data = null) {
        const id = Date.now();
        const container = document.getElementById('insurance-container');
        const div = document.createElement('div');
        div.className = 'dynamic-row';
        div.style.borderLeftColor = "#198754"; // ç¶ è‰²å€åˆ¥
        div.id = `ins-${id}`;
        div.innerHTML = `
            <button class="btn-remove" onclick="removeRow('ins-${id}', 'ins')">&times;</button>
            <div class="row g-2">
                <div class="col-12">
                    <input type="text" class="form-control form-control-sm ins-name" placeholder="ä¿éšªåç¨± (å¦‚: å„²è“„éšª)" value="${data ? data.name : ''}" oninput="saveDataLocal()">
                </div>
                <div class="col-6">
                    <div class="input-group input-group-sm">
                        <span class="input-group-text">$</span>
                        <input type="number" class="form-control ins-amount" placeholder="å¹´ç¹³è²»" value="${data ? data.amount : ''}" oninput="calculateAll();saveDataLocal()">
                    </div>
                </div>
                <div class="col-6">
                    <div class="input-group input-group-sm">
                        <input type="number" class="form-control ins-years" placeholder="å‰©å¹¾å¹´" value="${data ? data.years : ''}" oninput="saveDataLocal()">
                        <span class="input-group-text">å¹´</span>
                    </div>
                </div>
            </div>
        `;
        container.appendChild(div);
        if(!data) saveDataLocal();
    }

    function removeRow(elementId, type) {
        document.getElementById(elementId).remove();
        calculateAll();
        saveDataLocal();
    }

    // --- æ ¸å¿ƒè¨ˆç®—é‚è¼¯ ---
    function calculateAll() {
        // 1. æ”¶å…¥
        const passiveIncome = 
            (Number(document.getElementById('income-amway').value) || 0) + 
            (Number(document.getElementById('income-stock').value) || 0) + 
            (Number(document.getElementById('income-other').value) || 0);

        // 2. æ”¯å‡º (åŒ…å«å‹•æ…‹è²¸æ¬¾ + ä¿éšªæ”¤æ + ç”Ÿæ´»è²»)
        let totalMonthlyLoan = 0;
        document.querySelectorAll('.loan-amount').forEach(el => totalMonthlyLoan += (Number(el.value) || 0));

        let totalMonthlyIns = 0;
        // ä¿éšªé€šå¸¸æ˜¯å¹´ç¹³ï¼Œé€™è£¡é™¤ä»¥12æ›ç®—æœˆè² æ“”
        document.querySelectorAll('.ins-amount').forEach(el => totalMonthlyIns += (Number(el.value) || 0) / 12);

        const livingExpense = Number(document.getElementById('expense-living').value) || 0;
        const totalMonthlyExpense = totalMonthlyLoan + totalMonthlyIns + livingExpense;

        // 3. è³‡ç”¢
        let totalAsset = 0;
        document.querySelectorAll('.asset-item').forEach(el => totalAsset += (Number(el.value) || 0));

        // 4. å¤¢æƒ³èˆ‡é€€ä¼‘è¨ˆç®—
        const targetMonthlyExpense = Number(document.getElementById('target-monthly-expense').value) || 0;
        const dreamAmount = Number(document.getElementById('dream-amount').value) || 0;
        const currentAge = Number(document.getElementById('current-age').value) || 0;
        const retireAge = Number(document.getElementById('retire-age').value) || 0;

        // è¨ˆç®—é€€ä¼‘ç¼ºå£ (ç›®æ¨™æœˆèŠ±è²» - ç›®å‰è¢«å‹•æ”¶å…¥)
        const retirementGap = targetMonthlyExpense - passiveIncome;
        const yearsToRetire = retireAge - currentAge;

        // --- æ›´æ–° UI ---

        // A. é€€ä¼‘ç¼ºå£é¡¯ç¤º
        const gapEl = document.getElementById('retirement-gap');
        const statusEl = document.getElementById('retirement-status');
        const barEl = document.getElementById('retirement-bar');
        
        if (targetMonthlyExpense > 0) {
            if (retirementGap <= 0) {
                gapEl.innerHTML = "<span class='text-success'>å·²é”æˆ! ğŸ‰</span>";
                gapEl.className = "stat-value";
                statusEl.innerHTML = `æ­å–œï¼æ‚¨çš„è¢«å‹•æ”¶å…¥å·²ç¶“è¶…éé€€ä¼‘ç›®æ¨™ï¼Œéš¨æ™‚å¯ä»¥é€€ä¼‘ï¼`;
                statusEl.className = "alert alert-success mt-3 mb-0 py-2 small fw-bold text-center";
                barEl.style.width = "100%";
            } else {
                gapEl.innerHTML = `-$${formatNumber(retirementGap)}<small>/æœˆ</small>`;
                gapEl.className = "stat-value text-danger";
                statusEl.innerHTML = `é›¢ ${retireAge} æ­²é€€ä¼‘é‚„æœ‰ <strong>${yearsToRetire > 0 ? yearsToRetire : 0}</strong> å¹´ï¼Œæ¯æœˆéœ€å†å¢åŠ  <strong>$${formatNumber(retirementGap)}</strong> è¢«å‹•æ”¶å…¥`;
                statusEl.className = "alert alert-warning mt-3 mb-0 py-2 small fw-bold text-center text-dark";
                
                // é€²åº¦æ¢
                const coverage = (passiveIncome / targetMonthlyExpense) * 100;
                barEl.style.width = `${coverage}%`;
            }
        } else {
            gapEl.textContent = "è«‹è¨­å®šç›®æ¨™";
            barEl.style.width = "0%";
            statusEl.textContent = "è«‹åœ¨ã€Œè¨­å®šã€è¼¸å…¥é€€ä¼‘å¾Œæƒ³èŠ±çš„é‡‘é¡";
        }

        // B. å¤¢æƒ³é”æˆç‡
        const dreamEl = document.getElementById('dream-progress');
        if (dreamAmount > 0) {
            const progress = (totalAsset / dreamAmount) * 100;
            dreamEl.textContent = progress.toFixed(1) + "%";
        } else {
            dreamEl.textContent = "æœªè¨­å®š";
        }

        return { passiveIncome, totalAsset, totalMonthlyExpense };
    }

    // --- å„²å­˜èˆ‡æ­·å²ç´€éŒ„ ---
    function saveDataLocal() {
        const data = {
            inputs: {},
            loans: [],
            insurances: []
        };

        // å­˜æ‰€æœ‰ä¸€èˆ¬è¼¸å…¥æ¡†
        document.querySelectorAll('.save-input').forEach(el => {
            data.inputs[el.id] = el.value;
        });

        // å­˜è²¸æ¬¾åˆ—è¡¨
        document.querySelectorAll('#loan-container .dynamic-row').forEach(row => {
            data.loans.push({
                name: row.querySelector('.loan-name').value,
                amount: row.querySelector('.loan-amount').value,
                years: row.querySelector('.loan-years').value
            });
        });

        // å­˜ä¿éšªåˆ—è¡¨
        document.querySelectorAll('#insurance-container .dynamic-row').forEach(row => {
            data.insurances.push({
                name: row.querySelector('.ins-name').value,
                amount: row.querySelector('.ins-amount').value,
                years: row.querySelector('.ins-years').value
            });
        });

        localStorage.setItem('myFinancialPlanner_Current', JSON.stringify(data));
    }

    function loadData() {
        const json = localStorage.getItem('myFinancialPlanner_Current');
        if (!json) return;
        const data = JSON.parse(json);

        // å›å¡«ä¸€èˆ¬è¼¸å…¥æ¡†
        for (const [id, value] of Object.entries(data.inputs)) {
            const el = document.getElementById(id);
            if (el) el.value = value;
        }

        // å›å¡«è²¸æ¬¾
        document.getElementById('loan-container').innerHTML = '';
        if (data.loans) data.loans.forEach(loan => addLoanRow(loan));

        // å›å¡«ä¿éšª
        document.getElementById('insurance-container').innerHTML = '';
        if (data.insurances) data.insurances.forEach(ins => addInsRow(ins));
        
        // è¼‰å…¥æ­·å²åˆ—è¡¨
        renderHistory();
    }

    // ç´€éŒ„æœ¬æœˆ (å°å­˜)
    function saveCurrentMonthRecord() {
        const result = calculateAll();
        const now = new Date();
        const dateStr = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`;
        
        const record = {
            id: Date.now(),
            date: dateStr,
            passive: result.passiveIncome,
            asset: result.totalAsset
        };

        let history = JSON.parse(localStorage.getItem('myFinancialPlanner_History') || "[]");
        
        // æª¢æŸ¥æ˜¯å¦åŒå€‹æœˆå·²å­˜éï¼Œè‹¥æœ‰å‰‡è¦†è“‹
        const existingIndex = history.findIndex(h => h.date === dateStr);
        if (existingIndex >= 0) {
            if(!confirm(`å·²æœ‰ ${dateStr} çš„ç´€éŒ„ï¼Œç¢ºå®šè¦è¦†è“‹å—ï¼Ÿ`)) return;
            history[existingIndex] = record;
        } else {
            history.push(record);
        }

        // æ’åºï¼šæ–°åˆ°èˆŠ
        history.sort((a, b) => b.date.localeCompare(a.date));
        
        localStorage.setItem('myFinancialPlanner_History', JSON.stringify(history));
        renderHistory();
        alert('âœ… å·²æˆåŠŸç´€éŒ„æœ¬æœˆè²¡å‹™å¿«ç…§ï¼');
    }

    function renderHistory() {
        const history = JSON.parse(localStorage.getItem('myFinancialPlanner_History') || "[]");
        const tbody = document.getElementById('history-list');
        const noData = document.getElementById('no-history');
        
        tbody.innerHTML = '';
        
        if (history.length === 0) {
            noData.style.display = 'block';
            return;
        }
        noData.style.display = 'none';

        history.forEach(item => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${item.date}</td>
                <td class="text-success fw-bold">$${formatNumber(item.passive)}</td>
                <td>$${formatNumber(item.asset)}</td>
                <td><button class="btn btn-sm btn-outline-danger" onclick="deleteHistory(${item.id})"><i class="fas fa-trash"></i></button></td>
            `;
            tbody.appendChild(tr);
        });
    }

    function deleteHistory(id) {
        if(!confirm("ç¢ºå®šåˆªé™¤æ­¤ç­†æ­·å²ç´€éŒ„ï¼Ÿ")) return;
        let history = JSON.parse(localStorage.getItem('myFinancialPlanner_History') || "[]");
        history = history.filter(h => h.id !== id);
        localStorage.setItem('myFinancialPlanner_History', JSON.stringify(history));
        renderHistory();
    }

    function clearHistory() {
        if(confirm("ç¢ºå®šæ¸…ç©ºæ‰€æœ‰æ­·å²ç´€éŒ„ï¼Ÿ(ç„¡æ³•å¾©åŸ)")) {
            localStorage.removeItem('myFinancialPlanner_History');
            renderHistory();
        }
    }

    function formatNumber(num) {
        return Math.floor(num).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
</script>

</body>
</html>
