<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI å¼•æµå°å¸«ç³»çµ± V2.2 ğŸ‘‘</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #1e293b, #4338ca, #701a75); }
        .step-card { @apply bg-white p-4 rounded-2xl shadow-sm border border-slate-100 mb-4; }
        .token-input { @apply bg-slate-50 border border-slate-200 rounded-xl p-3 text-xs w-full focus:ring-2 ring-indigo-500 outline-none transition; }
    </style>
</head>
<body class="bg-slate-50 font-sans text-slate-900">

    <nav class="gradient-bg p-6 text-white shadow-2xl sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-black italic tracking-tight">AI FLOW å¼•æµä¸­æ§å° ğŸš€</h1>
                <p class="text-[10px] text-yellow-300 font-bold uppercase tracking-widest">æ‰“é€ è¤‡åˆ©ç³»çµ±ï¼Œé‚å‘çš‡å† å¤§ä½¿ ğŸ‘‘</p>
            </div>
            <div class="text-right hidden md:block">
                <p class="text-sm font-bold">2026 æ·¨è³‡ç”¢ 700 è¬ç›®æ¨™ ğŸ’°</p>
                <p class="text-[10px] opacity-70">è®“ç³»çµ±ç‚ºä½ å·¥ä½œï¼ŒæŠŠæ™‚é–“ç•™çµ¦å®¶äºº ğŸŒ¹</p>
            </div>
        </div>
    </nav>

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <div class="grid lg:grid-cols-3 gap-8">
            
            <div class="lg:col-span-1 space-y-6">
                <div class="bg-indigo-900 text-white p-6 rounded-3xl shadow-xl">
                    <h2 class="text-xl font-bold mb-6 flex items-center gap-2">ğŸ“– ä¸‰åˆ†é˜ä¸Šæ‰‹æ•™å­¸</h2>
                    
                    <div class="space-y-6 text-sm">
                        <div class="flex gap-4">
                            <span class="bg-yellow-400 text-indigo-900 w-6 h-6 rounded-full flex items-center justify-center font-bold shrink-0 text-xs">1</span>
                            <div>
                                <p class="font-bold">è¨­å®šé‡‘é‘°èˆ‡æ¬Šæ–</p>
                                <p class="text-[10px] opacity-70 mt-1">ã€Œé‡‘é‘°ã€æ˜¯ä½ çš„å¸³è™Ÿï¼Œã€Œæ¬Šæ–ã€æ˜¯è·Ÿ FB/IG å€Ÿä¾†çš„å°ç« ã€‚è¼¸å…¥å¾ŒæŒ‰åŒæ­¥ã€‚</p>
                            </div>
                        </div>
                        <div class="flex gap-4">
                            <span class="bg-yellow-400 text-indigo-900 w-6 h-6 rounded-full flex items-center justify-center font-bold shrink-0 text-xs">2</span>
                            <div>
                                <p class="font-bold">æ–°å¢å¼•æµè¦å‰‡</p>
                                <p class="text-[10px] opacity-70 mt-1">è¨­å®šã€Œé—œéµå­—ã€è·Ÿã€Œå›è¦†å…§å®¹ã€ã€‚å¯ä»¥æ”¾ç¾åœ–ã€èªéŸ³æˆ–ä½ çš„æ•¸å­—äººå½±ç‰‡ã€‚</p>
                            </div>
                        </div>
                        <div class="flex gap-4">
                            <span class="bg-yellow-400 text-indigo-900 w-6 h-6 rounded-full flex items-center justify-center font-bold shrink-0 text-xs">3</span>
                            <div>
                                <p class="font-bold">è¤‡è£½ä»£ç¢¼åˆ° GAS</p>
                                <p class="text-[10px] opacity-70 mt-1">é»æ“Šæœ€ä¸‹æ–¹çš„ã€Œè¤‡è£½ã€ï¼Œè²¼åˆ°ä½ çš„é›²ç«¯å¤§è…¦ (GAS) è£¡æŒ‰éƒ¨ç½²å°±å®Œæˆäº†ï¼</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-3xl shadow-lg border border-slate-100">
                    <h3 class="text-sm font-bold text-slate-700 mb-4 uppercase tracking-widest">ğŸ” ç³»çµ±å®‰å…¨é–å®š</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="text-[10px] text-slate-400 font-bold uppercase">è‡ªè¨‚å¸³è™Ÿè­˜åˆ¥ç¢¼ (Access Key)</label>
                            <input id="accountKey" type="password" placeholder="å»ºè­°ï¼šä½ çš„è‹±æ–‡å+ç”Ÿæ—¥" class="token-input mt-1">
                        </div>
                        <div>
                            <label class="text-[10px] text-slate-400 font-bold uppercase">FB/IG æ¬Šæ– (Token äº‚ç¢¼)</label>
                            <input id="metaToken" type="password" placeholder="ç”± Meta é–‹ç™¼è€…å¾Œå°é ˜å–" class="token-input mt-1">
                        </div>
                        <button onclick="syncData()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl text-xs shadow-lg transition transform active:scale-95">
                            åŒæ­¥é›²ç«¯è³‡æ–™ ğŸ”„
                        </button>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-2 space-y-6">
                <div class="bg-white p-8 rounded-3xl shadow-xl border border-slate-100 relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-2 h-full bg-indigo-600"></div>
                    <h2 class="text-2xl font-black text-slate-800 mb-8 flex justify-between items-center">
                        æ–°å¢å¼•æµè³‡ç”¢
                        <span id="lockStatus" class="text-[9px] bg-slate-100 text-slate-400 px-3 py-1 rounded-full">æœªåŒæ­¥</span>
                    </h2>
                    
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="space-y-6">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 mb-2 underline">æ­¥é©Ÿ Aï¼šé¸æ“‡ç™¼å¸ƒå¹³å°</label>
                                <div class="flex gap-2">
                                    <label class="bg-slate-50 px-3 py-2 rounded-xl border text-xs cursor-pointer flex items-center gap-1"><input type="checkbox" name="platform" value="FB" checked> FB</label>
                                    <label class="bg-slate-50 px-3 py-2 rounded-xl border text-xs cursor-pointer flex items-center gap-1"><input type="checkbox" name="platform" value="IG" checked> IG</label>
                                    <label class="bg-slate-50 px-3 py-2 rounded-xl border text-xs cursor-pointer flex items-center gap-1"><input type="checkbox" name="platform" value="TikTok"> TikTok</label>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 mb-2 underline">æ­¥é©Ÿ Bï¼šè¨­å®šé—œéµå­—</label>
                                <input id="keyword" type="text" placeholder="ä¾‹å¦‚ï¼šæƒ³äº†è§£å¥åº·ã€é ˜å–æ–¹æ¡ˆ" class="w-full bg-slate-50 border-2 border-slate-100 rounded-2xl p-4 text-sm focus:ring-4 ring-indigo-50 outline-none transition">
                            </div>
                            <div class="bg-indigo-50/50 p-5 rounded-3xl border border-indigo-100">
                                <label class="block text-xs font-bold text-indigo-900 mb-3">æ­¥é©Ÿ Cï¼šæ·»åŠ ç¾åœ–æˆ–å½±ç‰‡</label>
                                <div class="flex gap-2 mb-3">
                                    <input id="mediaUrl" type="text" placeholder="è²¼ä¸Šç¶²å€ (HTTPS)" class="flex-1 bg-white border border-indigo-200 rounded-xl px-4 py-2 text-xs outline-none">
                                    <button onclick="addAttach()" class="bg-indigo-600 text-white px-4 rounded-xl">ï¼‹</button>
                                </div>
                                <div id="attachList" class="space-y-2"></div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-2 underline">æ­¥é©Ÿ Dï¼šæ„Ÿæ€§å›è¦†æ–‡å­— ğŸ˜Š</label>
                            <textarea id="replyText" rows="12" placeholder="è¦ªæ„›çš„æœ‹å‹ï¼šæ”¶åˆ°ä½ çš„è©¢å•å¤ªé–‹å¿ƒäº†ï¼..." class="w-full bg-slate-50 border-2 border-slate-100 rounded-2xl p-4 text-sm focus:ring-4 ring-indigo-50 outline-none h-[calc(100%-2rem)]"></textarea>
                        </div>
                    </div>

                    <button onclick="saveRule()" class="mt-8 w-full gradient-bg text-white font-black py-5 rounded-2xl shadow-2xl hover:opacity-90 transition transform active:scale-95 text-lg">
                        å„²å­˜è¦å‰‡ï¼Œé–‹å§‹è¤‡åˆ©ï¼ ğŸš€
                    </button>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-3xl shadow-xl border border-slate-100">
                        <h3 class="font-bold text-slate-800 mb-4 text-sm">ğŸ“‹ ç›®å‰è³‡ç”¢æ¸…å–®</h3>
                        <div id="ruleDisplay" class="space-y-3 max-h-[300px] overflow-y-auto pr-2"></div>
                    </div>
                    
                    <div class="bg-slate-900 p-6 rounded-3xl shadow-2xl relative border-t-8 border-indigo-500">
                        <h3 class="text-indigo-400 font-mono text-[10px] font-bold mb-4 uppercase tracking-widest">// GAS ç³»çµ±ä»£ç¢¼</h3>
                        <button onclick="copyCode()" class="absolute top-4 right-4 bg-indigo-600 text-white px-4 py-1 rounded-full text-[10px] hover:bg-indigo-500 transition">è¤‡è£½ä»£ç¢¼</button>
                        <pre id="outputCode" class="text-indigo-300 font-mono text-[9px] overflow-x-auto leading-loose h-[200px]">const REPLY_RULES = [];</pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let rules = [];
        let currentAttachments = [];

        function syncData() {
            const key = document.getElementById('accountKey').value;
            if(!key) return alert('è«‹è¼¸å…¥å¸³è™Ÿè­˜åˆ¥ç¢¼ï¼Œæ‰èƒ½åŒæ­¥ä½ çš„è³‡æ–™å–”ï¼');
            const data = localStorage.getItem('vault_' + key);
            rules = data ? JSON.parse(data) : [];
            document.getElementById('lockStatus').innerText = 'â— å·²é–å®šå¸³è™Ÿ: ' + key;
            document.getElementById('lockStatus').className = 'text-[9px] bg-green-100 text-green-600 px-3 py-1 rounded-full font-bold';
            renderUI();
            alert('åŒæ­¥æˆåŠŸï¼ç¾åœ¨å¯ä»¥é–‹å§‹ç·¨è¼¯äº† âœ¨');
        }

        function addAttach() {
            const url = document.getElementById('mediaUrl').value;
            if(!url) return;
            currentAttachments.push(url);
            renderAttach();
            document.getElementById('mediaUrl').value = '';
        }

        function renderAttach() {
            document.getElementById('attachList').innerHTML = currentAttachments.map((url, i) => `
                <div class="bg-white p-2 rounded-xl flex justify-between items-center text-[9px] border border-indigo-100 shadow-sm">
                    <span class="truncate opacity-50 flex-1">${url}</span>
                    <button onclick="currentAttachments.splice(${i},1);renderAttach()" class="text-red-400 ml-2">âŒ</button>
                </div>`).join('');
        }

        function saveRule() {
            const key = document.getElementById('accountKey').value;
            const kw = document.getElementById('keyword').value;
            const text = document.getElementById('replyText').value;
            const platforms = Array.from(document.querySelectorAll('input[name="platform"]:checked')).map(cb => cb.value);

            if(!key) return alert('è«‹å…ˆè¼¸å…¥å·¦å´çš„ã€Œå¸³è™Ÿè­˜åˆ¥ç¢¼ã€ï¼');
            if(!kw || !text) return alert('é—œéµå­—èˆ‡æ–‡å­—ä¸èƒ½ç©ºè‘—å–”ï¼');

            rules.push({ platforms, keyword: kw, text, attachments: [...currentAttachments] });
            localStorage.setItem('vault_' + key, JSON.stringify(rules));
            renderUI();
            
            // æ¸…ç©ºè¼¸å…¥æ¡†
            document.getElementById('keyword').value = '';
            document.getElementById('replyText').value = '';
            currentAttachments = [];
            renderAttach();
        }

        function renderUI() {
            const display = document.getElementById('ruleDisplay');
            display.innerHTML = rules.length === 0 ? '<p class="text-center text-slate-400 py-10 text-xs italic">é€™è£¡é‚„ç©ºç©ºçš„ï¼Œå¿«å»æ–°å¢è¦å‰‡å§ï¼</p>' : '';
            rules.forEach((r, i) => {
                display.innerHTML += `
                    <div class="bg-slate-50 p-4 rounded-2xl border border-slate-100 relative shadow-sm">
                        <div class="flex gap-1 mb-2">
                            ${r.platforms.map(p => `<span class="px-2 py-0.5 rounded-[4px] text-[8px] font-bold text-white ${p==='FB'?'bg-blue-600':'bg-pink-500'}">${p}</span>`).join('')}
                        </div>
                        <h4 class="font-bold text-xs text-indigo-900">${r.keyword}</h4>
                        <p class="text-[10px] text-slate-400 truncate mt-1">${r.text}</p>
                        <button onclick="rules.splice(${i},1);localStorage.setItem('vault_'+document.getElementById('accountKey').value, JSON.stringify(rules));renderUI()" class="absolute top-4 right-4 text-slate-300">âŒ</button>
                    </div>`;
            });
            document.getElementById('outputCode').innerText = `const REPLY_RULES = ${JSON.stringify(rules, null, 2)};`;
        }

        function copyCode() {
            const code = document.getElementById('outputCode').innerText;
            navigator.clipboard.writeText(code).then(() => alert('ä»£ç¢¼å·²è¤‡è£½ï¼è«‹å» GAS è²¼ä¸Šä¸¦å­˜æª” âœ¨'));
        }
    </script>
</body>
</html>
