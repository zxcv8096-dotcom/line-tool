<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§å¿ƒAI Flow | æå˜‰å“²Gavin ğŸ‘‘</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .bright-gradient { background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); }
        .instruction-step { @apply flex gap-3 p-4 bg-white rounded-2xl shadow-sm border border-slate-100; }
        .number-icon { @apply w-6 h-6 rounded-full bg-indigo-600 text-white flex items-center justify-center text-xs font-bold shrink-0; }
    </style>
</head>
<body class="bg-slate-50 font-sans text-slate-800">

    <nav class="bg-white border-b border-slate-200 p-6 sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="p-2 bg-indigo-600 rounded-lg text-white font-black italic text-xl">å¤§å¿ƒ</div>
                <div>
                    <h1 class="text-2xl font-black text-slate-900 tracking-tight">AI Flow ç³»çµ±</h1>
                    <p class="text-[10px] text-indigo-600 font-bold uppercase tracking-widest">è£½ä½œè€…ï¼šæå˜‰å“² Gavin</p>
                </div>
            </div>
            <div class="text-right hidden sm:block">
                <p class="text-sm font-bold text-slate-900">2026 æ·¨è³‡ç”¢ 700 è¬ç›®æ¨™ ğŸ’°</p>
                <p class="text-[10px] text-slate-400">è¤‡åˆ©è³‡ç”¢ç³»çµ± | çš‡å† å¤§ä½¿ä¹‹è·¯ ğŸ‘‘</p>
            </div>
        </div>
    </nav>

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        
        <div class="grid md:grid-cols-3 gap-4 mb-10">
            <div class="instruction-step">
                <div class="number-icon">1</div>
                <div>
                    <h4 class="font-bold text-sm">è¼¸å…¥èº«åˆ†é‡‘é‘°</h4>
                    <p class="text-[10px] text-slate-500 mt-1">è¨­å®šä½ çš„å°ˆå±¬å¸³è™Ÿï¼ˆå¦‚ï¼šGavin2026ï¼‰ï¼Œæ‰‹æ©Ÿé›»è…¦åŒæ­¥å°±é å®ƒã€‚</p>
                </div>
            </div>
            <div class="instruction-step">
                <div class="number-icon">2</div>
                <div>
                    <h4 class="font-bold text-sm">è¨­å®šå¼•æµé—œéµå­—</h4>
                    <p class="text-[10px] text-slate-500 mt-1">è¨­å®šç•¶æœ‹å‹èªªä»€éº¼å­—æ™‚ï¼Œç³»çµ±è¦è‡ªå‹•è·³å‡ºä¾†å¹«ä½ æœå‹™ã€‚</p>
                </div>
            </div>
            <div class="instruction-step">
                <div class="number-icon">3</div>
                <div>
                    <h4 class="font-bold text-sm">è¤‡è£½ä»£ç¢¼è‡³å¤§è…¦</h4>
                    <p class="text-[10px] text-slate-500 mt-1">å°‡ç”Ÿæˆçš„ä»£ç¢¼è¤‡è£½ï¼Œè²¼åˆ° GAS é›²ç«¯å¤§è…¦ï¼Œç³»çµ±å°±æ­£å¼å•Ÿå‹•ï¼</p>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-4 gap-8">
            
            <div class="lg:col-span-1 space-y-6">
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-4 tracking-widest">ğŸ” å®‰å…¨é–å®š</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="text-[10px] font-bold text-slate-600">å¸³è™Ÿè­˜åˆ¥é‡‘é‘°</label>
                            <input id="accountKey" type="password" placeholder="è¼¸å…¥ç§å¯†è­˜åˆ¥ç¢¼" class="w-full bg-slate-50 border border-slate-200 rounded-xl p-3 text-xs mt-1 outline-none focus:ring-2 ring-indigo-500/20">
                        </div>
                        <button onclick="syncData()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl text-xs transition shadow-lg shadow-indigo-200 active:scale-95">åŒæ­¥é›²ç«¯è³‡æ–™ ğŸ”„</button>
                    </div>
                </div>

                <div class="bg-indigo-50 p-6 rounded-3xl border border-indigo-100">
                    <h3 class="text-xs font-bold text-indigo-900 uppercase mb-2">ç•¶å‰ç‰ˆæœ¬æ¬¡åº</h3>
                    <ul class="text-[11px] space-y-2 text-indigo-700 font-medium">
                        <li>â— V2.5 å¤§å¿ƒAI Flow å† åç‰ˆ âœ…</li>
                        <li class="opacity-50">â—‹ V3.0 Meta å¯¦æ©Ÿè‡ªå‹•å›è¦† â³</li>
                        <li class="opacity-50">â—‹ V4.0 å…¨è‡ªå‹•æ½›å®¢è¨˜éŒ„ç³»çµ± ğŸš€</li>
                    </ul>
                </div>
            </div>

            <div class="lg:col-span-3 space-y-6">
                <div class="bg-white p-8 rounded-3xl shadow-xl border border-slate-200 relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-2 h-full bg-indigo-600"></div>
                    <div class="flex justify-between items-center mb-8 border-b pb-4">
                        <h2 class="text-xl font-black text-slate-900 tracking-tight">æ™ºèƒ½è¦å‰‡ç·¨è¼¯å™¨</h2>
                        <span id="syncStatus" class="text-[10px] bg-slate-100 text-slate-500 px-3 py-1 rounded-full">æœªåŒæ­¥</span>
                    </div>

                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="space-y-6">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 mb-2 uppercase tracking-tighter">1. é¸æ“‡å¹³å°</label>
                                <div class="flex gap-2">
                                    <label class="bg-slate-50 px-3 py-2 rounded-xl border text-xs cursor-pointer flex items-center gap-1 font-medium"><input type="checkbox" name="platform" value="FB" checked> FB</label>
                                    <label class="bg-slate-50 px-3 py-2 rounded-xl border text-xs cursor-pointer flex items-center gap-1 font-medium"><input type="checkbox" name="platform" value="IG" checked> IG</label>
                                    <label class="bg-slate-50 px-3 py-2 rounded-xl border text-xs cursor-pointer flex items-center gap-1 font-medium"><input type="checkbox" name="platform" value="TikTok"> TikTok</label>
                                    <label class="bg-slate-50 px-3 py-2 rounded-xl border text-xs cursor-pointer flex items-center gap-1 font-medium"><input type="checkbox" name="platform" value="Threads"> Threads</label>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-xs font-bold text-slate-500 mb-2 uppercase tracking-tighter">2. é—œéµå­—èˆ‡åŒ¹é…æ¨¡å¼</label>
                                <div class="flex gap-2">
                                    <input id="keyword" type="text" placeholder="ä¾‹å¦‚ï¼šæƒ³äº†è§£" class="flex-1 bg-slate-50 border border-slate-200 rounded-xl p-3 text-sm outline-none">
                                    <select id="matchMode" class="bg-white border border-slate-200 rounded-xl px-2 py-1 text-xs outline-none">
                                        <option value="includes">åŒ…å«å­—çœ¼ âœ¨</option>
                                        <option value="exact">å®Œå…¨ç›¸åŒ</option>
                                    </select>
                                </div>
                            </div>

                            <div class="bg-slate-50 p-5 rounded-2xl border border-slate-100">
                                <label class="block text-xs font-bold text-slate-600 mb-2">3. é™„åŠ åª’é«”é€£çµ (åœ–/å½±/éŸ³)</label>
                                <div class="flex gap-2 mb-3">
                                    <input id="mediaUrl" type="text" placeholder="è²¼ä¸Šç¶²å€ (HTTPS)" class="flex-1 bg-white border border-slate-200 rounded-xl px-4 py-2 text-xs outline-none">
                                    <button onclick="addAttach()" class="bg-indigo-600 text-white px-4 rounded-xl font-bold">ï¼‹</button>
                                </div>
                                <div id="attachList" class="space-y-2"></div>
                            </div>
                        </div>

                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-2 uppercase tracking-tighter">4. æ„Ÿæ€§å›è¦†æ–‡å­— ğŸ˜Š</label>
                            <textarea id="replyText" rows="12" placeholder="æå˜‰å“²Gavin æ•™ä½ å¯«ï¼šã€è¦ªæ„›çš„æœ‹å‹ï¼Œå¾ˆé«˜èˆˆè¦‹åˆ°ä½ ...ã€" class="w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 text-sm outline-none focus:bg-white transition h-[calc(100%-2rem)]"></textarea>
                        </div>
                    </div>

                    <button onclick="saveRule()" class="mt-8 w-full bright-gradient text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition transform active:scale-95 text-lg">
                        å„²å­˜è³‡ç”¢ä¸¦åŒæ­¥é›²ç«¯ ğŸš€
                    </button>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-3xl shadow-lg border border-slate-200">
                        <h3 class="font-black text-slate-800 mb-4 text-sm flex items-center justify-between">
                            ğŸ“‹ ç›®å‰å¼•æµè³‡ç”¢åº«
                            <button onclick="clearAll()" class="text-[10px] text-red-400 font-normal">æ¸…é™¤å…¨éƒ¨</button>
                        </h3>
                        <div id="ruleDisplay" class="space-y-3 max-h-[300px] overflow-y-auto pr-2"></div>
                    </div>
                    
                    <div class="bg-slate-900 p-6 rounded-3xl shadow-2xl relative border-t-8 border-indigo-500">
                        <h3 class="text-indigo-400 font-mono text-[10px] font-bold mb-4 uppercase tracking-widest">// å¤§å¿ƒAI Flow ç³»çµ±è¼¸å‡º</h3>
                        <button onclick="copyCode()" class="absolute top-4 right-4 bg-indigo-600 text-white px-4 py-1 rounded-full text-[10px] hover:bg-indigo-500 transition">è¤‡è£½ä»£ç¢¼</button>
                        <pre id="outputCode" class="text-indigo-200 font-mono text-[9px] overflow-x-auto leading-loose h-[200px]">const REPLY_RULES = [];</pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let rules = [];
        let currentAttach = [];

        function syncData() {
            const key = document.getElementById('accountKey').value;
            if(!key) return alert('è«‹å…ˆè¼¸å…¥å¸³è™Ÿé‡‘é‘°å–”ï¼');
            const data = localStorage.getItem('vault_' + key);
            rules = data ? JSON.parse(data) : [];
            document.getElementById('syncStatus').innerText = 'å·²é–å®šå¸³è™Ÿ: ' + key;
            document.getElementById('syncStatus').className = 'text-[10px] bg-green-100 text-green-600 px-3 py-1 rounded-full font-bold';
            renderUI();
            alert('åŒæ­¥æˆåŠŸï¼å·²è®€å– [' + key + '] çš„è³‡ç”¢åº« âœ¨');
        }

        function addAttach() {
            const url = document.getElementById('mediaUrl').value;
            if(!url) return;
            currentAttach.push(url);
            renderAttach();
            document.getElementById('mediaUrl').value = '';
        }

        function renderAttach() {
            document.getElementById('attachList').innerHTML = currentAttach.map((url, i) => `
                <div class="bg-white p-2 rounded-xl flex justify-between items-center text-[9px] border border-slate-100 shadow-sm">
                    <span class="truncate opacity-50 flex-1">${url}</span>
                    <button onclick="currentAttach.splice(${i},1);renderAttach()" class="text-red-400 ml-2 font-bold">ç§»é™¤</button>
                </div>`).join('');
        }

        function saveRule() {
            const key = document.getElementById('accountKey').value;
            const kw = document.getElementById('keyword').value;
            const mode = document.getElementById('matchMode').value;
            const text = document.getElementById('replyText').value;
            const platforms = Array.from(document.querySelectorAll('input[name="platform"]:checked')).map(cb => cb.value);

            if(!key) return alert('è«‹è¼¸å…¥å¸³è™Ÿé‡‘é‘°ä»¥é€²è¡Œå­˜æª”ï¼');
            if(!kw || !text) return alert('é—œéµå­—èˆ‡æ–‡æ¡ˆå…§å®¹ä¸èƒ½ç©ºç™½å–”ï¼');

            rules.push({ platforms, keyword: kw, mode: mode, text: text, attachments: [...currentAttach] });
            localStorage.setItem('vault_' + key, JSON.stringify(rules));
            renderUI();
            document.getElementById('keyword').value = '';
            document.getElementById('replyText').value = '';
            currentAttach = [];
            renderAttach();
        }

        function renderUI() {
            const display = document.getElementById('ruleDisplay');
            display.innerHTML = rules.length === 0 ? '<p class="text-center text-slate-400 py-10 text-xs italic">ç›®å‰è³‡ç”¢åº«æ˜¯ç©ºçš„...</p>' : '';
            rules.forEach((r, i) => {
                display.innerHTML += `
                    <div class="bg-slate-50 p-4 rounded-2xl border border-slate-100 relative shadow-sm hover:border-indigo-200 transition">
                        <div class="flex gap-1 mb-2">
                            ${r.platforms.map(p => `<span class="px-2 py-0.5 rounded text-[8px] font-bold text-white bg-indigo-500">${p}</span>`).join('')}
                            <span class="px-2 py-0.5 rounded text-[8px] font-bold text-indigo-400 border border-indigo-200">${r.mode === 'includes' ? 'æ™ºèƒ½åŒ…å«' : 'ç²¾ç¢ºç›¸ç­‰'}</span>
                        </div>
                        <h4 class="font-bold text-xs text-slate-800">é—œéµå­—: ${r.keyword}</h4>
                        <p class="text-[10px] text-slate-400 truncate mt-1">${r.text}</p>
                        <button onclick="rules.splice(${i},1);localStorage.setItem('vault_'+document.getElementById('accountKey').value, JSON.stringify(rules));renderUI()" class="absolute top-4 right-4 text-slate-300 hover:text-red-500 transition">âŒ</button>
                    </div>`;
            });
            document.getElementById('outputCode').innerText = `const REPLY_RULES = ${JSON.stringify(rules, null, 2)};`;
        }

        function copyCode() {
            const code = document.getElementById('outputCode').innerText;
            navigator.clipboard.writeText(code).then(() => alert('å¤§è…¦ä»£ç¢¼è¤‡è£½æˆåŠŸï¼è«‹å‰å¾€ GAS è²¼ä¸Šä¸¦å­˜æª” âœ¨'));
        }

        function clearAll() {
            if(confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰è³‡ç”¢å—ï¼Ÿé€™å°‡ç„¡æ³•å¾©åŸï¼')) {
                rules = [];
                localStorage.removeItem('vault_' + document.getElementById('accountKey').value);
                renderUI();
            }
        }
    </script>
</body>
</html>
